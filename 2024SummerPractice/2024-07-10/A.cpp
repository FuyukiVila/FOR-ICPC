/*

                                                        $u-u------%                                                                                         3+--%-;;;;6
                                                       %;-i-------3                                                                                         %--!;;;;;; 6
                                                     %;$-+-------+                                                                                          %-;;;;;;;;+.n
                                                     %;$-+-------+                                                                                          %-;;;;;;;;+.n
                                                   %-;8--------z                                                                                          %-8;;;*;;;;;;.a
                                                 vv--;vi------a                                                                                         z-%;;;;--+;;;;;; %
                                                % ---;8-------                                                                                         8z;;;+-----;;;;;; %                                         @@@@@##@@@@@
                                               % ----;;.^----!                                                                                       %;;;;--------;;;;;;*%                                     @@                @@
                                               % ----;;;!-u-a                                                                                      %-;+-----------;;;;;;~u                                  6@                      @&
                                              % ------;;;;8-%%                                                                                  ;^ ---------------;;;;;;%                                  @                          @+
                                              % -------^;;;;o-%                                         +u386i^nv~                              * ---------------;;;;;;$;%                               @6                            v@
                                              % ---------;;;;;;$                              v%o.......................%%.                      ----------------;;;;;$no-1                             @*                              .@
                                              % ----------^;;;;;!$                        %i..................................o%~              % ---------------*;;;;vv$---%                           u@        u~~~au   uz~~~~an       $$
                                              u%------------;;;;;;83                  %+..........................................u%u          3.-------------- ;;;$vv3--+--6                          @       zv~~~~~~~u~~~~~~~~~u       @
                                               %8v-----------^;;;;;;$o            -%..................................................6%;     ^-------------- .;;;vvv3--;;;-v                          @       u~~~~~~~~~~~~~~~~~~u       @
                                                %v$------------;;;;;;;$3        %.........................................................%%   $-------.    +;;;$vvv6--;;;---%                         @       n~~~~~~~~~~~~~~~~~vn       @
                                               %.%vz------------+;;;;;;$     % ..............................................................u% -$8;;;;;;;;;;;$vvvv$--;;;;+---8                        @        *z~~~~~~~~~~~~~~va        @
                                              ----!vvv-----------;;;;;;$  6%....................................................................%%  *%6%$1;;$vvvvv$--;;;;;----%                        @~         uu~~~~~~~~~~~u         .@
                                              %--;- vva---------;;;;;;;$%8..................................................................+.....-%%-%vvvvvvvvvv%- ;;;;;;-----%                        @            uu~~~~~uu           @
                                             %---;;* nvv%-----;;;;;;;;$v......................................................................%.....-%------      -;;;;;;;*----8                         @               -              @
                                             %----;;;- !vvv8;;;;;;;;1$^..  ....................................................................-....  *o*;**^--- -;;;;;;;;*------%                        @3                          n@
                                             1----;;;;-  $vvvvv6$~;%...  ........................................................................+.     $;;;;;;;;;;;;;;;;;;--------%                        @.                       @
                                            %-----+;;;;;-   v$$$6o%..  ...   ................................................................. ...i      nn;;;;;;;;;;;;;;;;---------+%                        @                   @@
                                            %------;;;;;;-------1%..  ...      .............................................................    ...-      .$;;;;;;;;;;;;;;;^----------;%                      @        @@@@   6@@!
                                          u+-------;;;;;;;;;;;;%3.. .... .         .......................................................       ..-.      .$;;;;;;;;;;;;;;;------------6!                   @  +#@@@
                                         %----------;;;;;;;;;;36.. ... .           ..  .z.....................................      . ....        ..%.     ..%;;;;;;;;;;;;;;;-------------%
                                        %----------;;;;;;;;;;v%...........        .....3.........     .......     .............     . ......      ............un;;;;;;;;;;;;;;-------------%.
                                      o-----------;;;;;;;;;;;%.......................%.....      .    .......      .............     ..~........  ...6.........~n;;;;;;;;;;;;;;+------------~%
                                     %-----------;;;;;;;;;;;%......................-!%.....      ..   ........     ....~....%...........%............~..........%;;;;;;;;;;;;;;;;-------------%
                                    %-----------;;;;;;;;;;;$......................%^^i..........  .   ....o.....   .....%...!^$.........*!..........  ...........$;;;;;;;;;;;;;;;;-------------u
                                  a.----------;;;;;;;;;;;;$;..... ...............$^^ i.....................%...............6^^ a-........*..........  -........**$;;;;;;;;;;;;;;;;;*------------^n
                                 %----------;;;;;;;;;;;;;;$.....z .............+a^^  %.....................$6............-.!^    %.......*$.........  3......^**%;;;;;;;;;;;;;;;;;;;;-----------  %
                                %---------;;;;;;;;;;;;;;;$-..... .............^v^^   *.....................$*;u...........+$      %......**.......... %....-***$;;;;;;;;;;;;;;;;;;;;;;-----------  %
                               8 --------;;;;;;;;;;;;;;;;$.....^ ............+$^^   ..%....................%*^*$.........6%^...-n8%%%-....*$......... 1....^****%;;;;;;;;;;;;;;;;;;;;;;;---------- %%
                              ! -------;;;;;;;;;;;;;;;;;8z.....8 ...........-$$$......;-.*8................***.+*$...........+6%%8-....6..**......... o.......-**$;;;;;;;;;;;;;;;;;;;;;;;--------- %
                             % ------;;;;;;;;;;;;;;;;;;;$...................$818       %....................~*...-*$v...........%     %%..^*a........ o...........%;;;;;;;;;;;;;;;;;;;;;;-------- %1
                            % -----;;;;;;;;;;;;;;;;;;;;;$.....z ...........**^+.        %...................$*......*!$...........-%   %...*$........ %............%;;;;;;;;;;;;;;;;;;;;-------- %!
                            % ------;;;;;;;;;;;;;;;;;;;~%.....% ...........$^^..         %..................-*.......%^^%8...........%6 %..*o........ 6............%z;;;;;;;;;;;;;;;;;;-------- %
                            %  -----;;;;;;;;;;;;;;;;;;;~$.....- ..........n^^...          %..................$*.....%^^    %6...........%6.**u....... -........^*-.$;;;;;;;;;;;;;;;;;--------- %
                            %!  -----;;;;;;;;;;;;;;;;;;;3..... ...........$^^..            %..................%....%^^        %8..........-%*%...... 6...-********$;;;;;;;;;;;;;;;;;--------.-%
                             -%  -----;;;;;;;;;;;;;;;;;;;%...+ ..........*~^^.              %.................o+..%^^            %%..........%...... -***********%u;;;;;;;;;;;;;;;---------^61~
                               %1 -----;;;;;;;;;;;;;;;;;;;%..! ..........n^^..               ~%................%.%^^                 %%......%..... %***********%!;;;;;;;;;;;;;;---------%;;+$
                                 %. ----;;;;;;;;;;;;;;;;;;;%.% ..........$^^                   %................$^^                       %%+3..... .-$n*******%~;;;;;;;;;;;;--------;$;;;*-$
                                  *% -----;;;;;;;;;;;;;;;;;;%% ..........$^^           ;ii-      %..............^z.      %%%%%%%%%%^         8.... %.......1$6$;;;;;;;;---------^$v;;;;;;-$
                                    -% -----;;;;;;;;;;;;;;;;o% ..........$^^       !%%%%%%%%%%     %u.....%!-....8+     888!     8%%%        %....i%***$%!-.+--;~~z%%$8!66!~;;;;;;;;;;;n$
                                       %+.----;;;;;;;;;;;;;;;$  .........%^^     .%%%i     n%%%^     ~%-..n*!.%...$   z886         888v      a...-.zo%-     6u^^^^^*$;;;;;;;;;;;;;;;%$
                                          o8..----;;;;;;;;;;;~  .........a^.    a%%8         ^8%6       z%3     -%%;u 66 .........  688     %... ..-    %^^^^^^^^^$*****%%o%$%$$v
                                           8.;;;~6$6---^;;;;;;$ .........-o     888            88                     ...............668    i.. ;....%1^^^*.^^^^%********$**...%v
                                             $ ;;;;;;;;;;;;;;;~. .........3    *86  ..........                      ...................    %...a^-..v^^^^ ...3-..$*******3***...%
                                               ^6 ;;;;;;;;;;;;;$ .........%     i!..............                    ....................  *-..6^^o..!^^$ ....%6...3******@****...%
                                                  -%~;;;;;;;;;;;$ ........-*    ...;...;^..;......                 .........;...;...;;... %.-8^-^n.-68$^....u.....$***********...^%
                                                    %.&@~;;;;;u%*%.........%   ...;...;;..;+......                 ........;...;+..^;....%.;v.  ^o..6***$...... .%******n*****^...%
                                                  *....@***********%........%  ...;...;..+;.......           .i%$$$%%..........;...;....%.8^    ^...%****%^^....%**************...%*
                                                  .....v*************$.......% ...................  $;;;;;;;;;;;;;;;;6.................;*$.    6$...$******$...%*****&*********...86
                                                 %.....*8*************;.%+....% ..................  6;;;^路路路++++++++路路3................%-    3**$...%*******$-%***~************-..n!
                                                 ......^**;************...-8%% % ...............    8路路+++++++++++++++6.............. %   !;****%...%**********;n**************+..%
                                                 *.....+***@***********....$i      ...........      ;*+++++++++++++++%     ......   .  ^$*******....%*******~u*****************.-%
                                                 %.....+*****6*********....&*%$                           -++++++++-                n%**********-...u*****i********************@
                                                  %....+*******#*******....@****%%^                                             6%  %***********i....o*@*********************@;
                                                   8...-*********#*****....@*********%$%    %                                ~%       $***********%....$*********************##
                                                zo  $..-*************@&....@***********$%     %%;  % %               i%             +%***********....+*******************@*$
                                              i-     -+-**************@....@**********;$               %%%+^^^^^^^^^%%%              %*********3;8....$****************$**%  %%
                                            v^        8@*************1.....@*********3$                 ~+^^^^^^^^^^$**z              %*******$**%.....$**************n***$    !6
                                           %  ....    .!*v***********..... @********$$                  **z**$^^$***~***               %a***@*****+.....8***********$****~-..    %
                                          o ... ...... %**~********&.....  ;@*****i%                    $v***;*i****$n*6                3$*@******$ .....%*********@*****6 ...     %
                                        .. ..      ... $**********3.....  @**&***$                      %8*v*****%***$*3                  &6*******.  ....-$******@******u+  ..     %
                                        a  ........ .. ;****@***#+-^%@@#*****@$3%                    .%**--*$*******v*$$%                   $3********8%%%%$$$***v********%  ...     %
                                       %  ........... %*****@**************%%.  .. o%       8%%~--^o@+--;-***~n*****i*~o*~@**u$$.         %1...$%****************o********61 ...      %
                                       . ........^o$$*******#***********n$  ..  ..     -%%%%~----***&--***;z****u$$6**o***#*****!$z%%%%~    ..    .n$%*********************z%...      ~3
                                      8 ....~813688%%%%%%%%%%886666666%%6666666666668%63iiiii8!!!!333%666%8%%%%%%%%%%%%%%%%%%%%!6!!!iii%%iiiiiiiiiiii11ua%%%aaaau$i!!!!!!!!!!$....     %
                                      % ......%                                                                                                                              %v%....   i;
                                      ! ......%                                                                                                                              %$$%8...   !
                                      u .....z%                                                                                                                              %.~....... %
                                      % ...!  %                                                                                                                              %  i...... %
                                      %   %   %                                                                                                                              %    %.... 8
                                      o  !    %                                      a                                                                                       %     %...~
                                       u u    %                                    aaaa                                                                                      %      %..%
                                       %%     %                                   aaaaaaaaaaaaaaaaav                  aaaaaaaaaaaaaaaaaaaaaaaaaa                             %       %.%
                                             3%                                 aaaz          +aaa                                        aaaaaz                             %        %
                                            %-%                               aaaa           aaa                                       aaaaa                                 %u
                                          %o%%%                             aaaaaaaaaaaaaaaaaaaaaaaaaa                              aaaaa                                    %uv
                                         %%-----%                           a.                     +aa                           aaaaa-                                      %%%v
                                        z%%--i%--%                            zaavnoooooooooooooooonaa                           -aaa                                      %^---%.
                                       .+%%-----*%                            zaazzzzzzzzzzzzzzzzzzzaa                            aaa                                     ^-----%%+
                                        +%%v-----%                                                 +aa                            aaa                                     %-+---%%+
                                        %%%%----;%                            aaaaaaaaaaaaaaaaaaaaaaaa                            aaa                                    %------%.3
                                 +1..+1   i%------i                                       v         a                             aaa                                     %-----%       3n%
                              i.....+ . *  %%-i18%                           aaz  ^aa    oaaa      ^aaa                           aaa                                    i6-----%      !a.&..o+
                            -...   ... 8.o  %%-~%%                          aaa   -aa      aa        zaaa                         aaa                                     %----%8     %.....@....%
                         1  ..   ..#.. .. .6  %                            aaa    ^aa            aaa   aaa                       -aaa                                      %%%%      %.....  .... ..8
                       %   ..   .. ... .6. .- %                           aaa      aaaaaaaaaaaaaaaa                         .aaaaaaan                                        %      %......  ..6..  .. ^
                     8 ..  .....  z...  ..... %                                                                              aaaaaz                                          %     o ....... .. @ .. ..  6
                   %.........    -  .....i... %                                                                                                                              %    +  ...   ....  a ..... .. .
                 % ..  ...  .... n......      %                                                                                                                              %   -  ... -   ...    .. .... .. 6
               u  ..  .......... .........- ..%                                                                                                                              %  - ......@... ......-..     ..   6
              -  ...   . ..  ...@.. ......v...%                                                                                                                              % ^  ..  ....... .. ...!...    ..    .
            %    .. ......   ...... ..........%                                                                                                                              %.   .    ... ..  .. ...@.........   .8
           ^     ..  ....   ...6...........1..%                                                                                                                              %    .  ..- . ...........i..............z
         %      ...     ...................a..%                                                                                                                              %   .. ...@..............................3
        ..    ....    ........................%                                                                                                                              %.... ....................+............... ~
      % .........   ..........$.............% %888888*v~nnnnnv!6668888888%%%%%%%%%%%%%%%%88%%%%%8%8%%%%%8888888%88888888888888%8%8866666888888888888888888888888888888888un~+%     ...~.................@................%
     8  ......     ......................... .  ..%--+8+-----*****$--*;*%**************$!%z;;;;;@#;;;;@+++;;+++++++;%++.@;;;;;;;;;;;&!$*************;*@@*u******---%-oa-%..  ..    ...@..................$.................
   ^......         ..................... .........-----%-----*****a--***$**************%  .+;@;;;;;;;@++++8;;+++++++*+++ o;;;;;~#;;;;;;;$***********;*u;*;******---~-++-+..  .. ..........................-.................%
  %... ....    ..............i..........  .. 1...%-----%-----******--*;a3************z3  ++++ ++%;;6++++++++#;++++*+++++. o;~;;;;;;;;;;;;@**********~*o;*o******+---%-;--1.       ...u.................................. ....;

*/


#define GKD std::cin.tie(nullptr)->std::ios::sync_with_stdio(false)
#define clr(a, b) memset(a, b, sizeof(a))
#define cpy(a, b) memcpy(a, b, sizeof(a))
//#define LOCAL
//#define PRIME

#include <bits/stdc++.h>

#ifdef LOCAL

#define dbg(x...) do { std::cout << #x << " -> "; err(x); } while (0)

void err() { std::cout << std::endl; }

template<class T, class... Ts>
void err(T arg, Ts &...args) {
    std::cout << arg << ' ';
    err(args...);
}

#else

#define dbg(x...) 114514;

#endif

using namespace std;
using ll = long long;
using ull = unsigned long long;
const int INF = 0x3f3f3f3f;
ll mod = 0;

inline ll qpow(ll _a, ll _n, ll _mod = mod) {
    ll ans = 1;
    while (_n) {
        if (_n & 1)
            ans *= _a;
        _n >>= 1;
        _a *= _a;
        if (_mod > 0) {
            ans %= _mod;
            _a %= _mod;
        }
    }
    return ans;
}

#ifdef PRIME

const int N = 1e7 + 100;
vector<int> minp(N);
vector<int> primes;
bitset<N> st;

void get_primes(int n) {
    for (int i = 2; i <= n; i++) {
        if (!st[i])
            minp[i] = i, primes.emplace_back(i);
        for (int j = 0; primes[j] * i <= n; j++) {
            int t = primes[j] * i;
            st[t] = true;
            minp[t] = primes[j];
            if (i % primes[j] == 0)
                break;
        }
    }
}

#endif

inline void init() {
    /*Init Here*/
}


char a[1050][1050];
bool vis[1050][1050];
int id[1050][1050];
int dx[] = {0, 1, 0, -1}, dy[] = {1, 0, -1, 0};
int h, w;

int get_num(pair<int, int> p) {
    return (p.first - 1) * w + p.second;
}


struct DSU {
    std::vector<int> f, siz;

    explicit DSU(int n) : f(n), siz(n, 1) { std::iota(f.begin(), f.end(), 0); }

    int find(int x) {
        while (x != f[x]) x = f[x] = f[f[x]];
        return x;
    }

    bool same(int x, int y) { return find(x) == find(y); }

    bool merge(int x, int y) {
        x = find(x);
        y = find(y);
        if (x == y) return false;
        siz[x] += siz[y];
        f[y] = x;
        return true;
    }

    int size(int x) { return siz[find(x)]; }
};

struct node {
    vector<int> idx;

    bool operator<(const node &a) const {
        return idx < a.idx;
    }
};

vector<node> ans;

vector<pair<int, int>> r;
ll t;

void dfs(int x, int y, int tx, int ty) {
    if (!ans.empty() && chrono::system_clock::now().time_since_epoch().count() - t >= 2000000000) return;
    if (a[x][y] != '.') {
        return;
    }
    if (x == tx && y == ty) {
        node a;
        for (auto const &x: r) {
            a.idx.emplace_back(id[x.first][x.second]);
        }
        sort(a.idx.begin(), a.idx.end());
        ans.emplace_back(a);
        return;
    }
    for (int i = 0; i < 4; i++) {
        int xx = x + dx[i], yy = y + dy[i];
        if (vis[xx][yy]) continue;
        vis[xx][yy] = true;
        r.emplace_back(xx, yy);
        dfs(xx, yy, tx, ty);
        vis[xx][yy] = false;
        r.pop_back();
    }
}

void idol_produce(int testCase) {
    /*Code Here*/
    int n;
    cin >> h >> w;
    DSU dsu(h * w + 1);
    for (int i = 1; i <= h; i++) {
        for (int j = 1; j <= w; j++) {
            a[i][j] = '#';
        }
    }
    int x1, y1, x2, y2;
    cin >> x1 >> y1 >> x2 >> y2;
    if (abs(x1 - x2) + abs(y1 - y2) <= 1) {
        a[x1][y1] = '.', a[x2][y2] = '.';
        for (int i = 1; i <= h; i++) {
            for (int j = 1; j <= w; j++) {
                cout << a[i][j];
            }
            cout << '\n';
        }
        return;
    }
    vector<pair<int, int>> p;
    for (int i = 1; i <= h; i++) {
        for (int j = 1; j <= w; j++) {
            int x, y;
            cin >> x >> y;
            p.emplace_back(x, y);
            id[x][y] = p.size();
        }
    }
    reverse(p.begin(), p.end());
    vis[x1][y1] = 1;
    vis[x2][y2] = 1;
    a[x1][y1] = '.';
    a[x2][y2] = '.';
    for (auto const &i: p) {
        if (dsu.same(get_num({x1, y1}), get_num({x2, y2}))) {
            break;
        }
        vis[i.first][i.second] = true;
        a[i.first][i.second] = '.';
        for (int j = 0; j < 4; j++) {
            if (vis[i.first + dx[j]][i.second + dy[j]]) {
                dsu.merge(get_num({i.first, i.second}), get_num({i.first + dx[j], i.second + dy[j]}));
            }
        }
    }
    for (int i = 1; i <= h; i++) {
        for (int j = 1; j <= w; j++) {
            vis[i][j] = false;
        }
    }
    r.emplace_back(x1, y1);
    vis[x1][y1] = true;
    t = chrono::system_clock::now().time_since_epoch().count();
    dfs(x1, y1, x2, y2);
    sort(ans.begin(), ans.end());
    reverse(p.begin(), p.end());
    for (int i = 1; i <= h; i++) {
        for (int j = 1; j <= w; j++) {
            a[i][j] = '#';
        }
    }
    for (auto const &i: ans.back().idx) {
        a[p[i - 1].first][p[i - 1].second] = '.';
    }
    for (int i = 1; i <= h; i++) {
        for (int j = 1; j <= w; j++) {
            cout << a[i][j];
        }
        cout << '\n';
    }
}

signed main() {
    GKD;
    init();
    int T = 1;
//    cin >> T;
    for (int i = 1; i <= T; i++) {
        idol_produce(i);
    }
    return 0;
}
