/*

                                                        $u-u------%                                                                                         3+--%-;;;;6
                                                       %;-i-------3                                                                                         %--!;;;;;; 6
                                                     %;$-+-------+                                                                                          %-;;;;;;;;+.n
                                                     %;$-+-------+                                                                                          %-;;;;;;;;+.n
                                                   %-;8--------z                                                                                          %-8;;;*;;;;;;.a
                                                 vv--;vi------a                                                                                         z-%;;;;--+;;;;;; %
                                                % ---;8-------                                                                                         8z;;;+-----;;;;;; %                                         @@@@@##@@@@@
                                               % ----;;.^----!                                                                                       %;;;;--------;;;;;;*%                                     @@                @@
                                               % ----;;;!-u-a                                                                                      %-;+-----------;;;;;;~u                                  6@                      @&
                                              % ------;;;;8-%%                                                                                  ;^ ---------------;;;;;;%                                  @                          @+
                                              % -------^;;;;o-%                                         +u386i^nv~                              * ---------------;;;;;;$;%                               @6                            v@
                                              % ---------;;;;;;$                              v%o.......................%%.                      ----------------;;;;;$no-1                             @*                              .@
                                              % ----------^;;;;;!$                        %i..................................o%~              % ---------------*;;;;vv$---%                           u@        u~~~au   uz~~~~an       $$
                                              u%------------;;;;;;83                  %+..........................................u%u          3.-------------- ;;;$vv3--+--6                          @       zv~~~~~~~u~~~~~~~~~u       @
                                               %8v-----------^;;;;;;$o            -%..................................................6%;     ^-------------- .;;;vvv3--;;;-v                          @       u~~~~~~~~~~~~~~~~~~u       @
                                                %v$------------;;;;;;;$3        %.........................................................%%   $-------.    +;;;$vvv6--;;;---%                         @       n~~~~~~~~~~~~~~~~~vn       @
                                               %.%vz------------+;;;;;;$     % ..............................................................u% -$8;;;;;;;;;;;$vvvv$--;;;;+---8                        @        *z~~~~~~~~~~~~~~va        @
                                              ----!vvv-----------;;;;;;$  6%....................................................................%%  *%6%$1;;$vvvvv$--;;;;;----%                        @~         uu~~~~~~~~~~~u         .@
                                              %--;- vva---------;;;;;;;$%8..................................................................+.....-%%-%vvvvvvvvvv%- ;;;;;;-----%                        @            uu~~~~~uu           @
                                             %---;;* nvv%-----;;;;;;;;$v......................................................................%.....-%------      -;;;;;;;*----8                         @              u~u             @
                                             %----;;;- !vvv8;;;;;;;;1$^..  ....................................................................-....  *o*;**^--- -;;;;;;;;*------%                        @3                          n@
                                             1----;;;;-  $vvvvv6$~;%...  ........................................................................+.     $;;;;;;;;;;;;;;;;;;--------%                        @.                       @
                                            %-----+;;;;;-   v$$$6o%..  ...   ................................................................. ...i      nn;;;;;;;;;;;;;;;;---------+%                        @                   @@
                                            %------;;;;;;-------1%..  ...      .............................................................    ...-      .$;;;;;;;;;;;;;;;^----------;%                      @        @@@@   6@@!
                                          u+-------;;;;;;;;;;;;%3.. .... .         .......................................................       ..-.      .$;;;;;;;;;;;;;;;------------6!                   @  +#@@@
                                         %----------;;;;;;;;;;36.. ... .           ..  .z.....................................      . ....        ..%.     ..%;;;;;;;;;;;;;;;-------------%
                                        %----------;;;;;;;;;;v%...........        .....3.........     .......     .............     . ......      ............un;;;;;;;;;;;;;;-------------%.
                                      o-----------;;;;;;;;;;;%.......................%.....      .    .......      .............     ..~........  ...6.........~n;;;;;;;;;;;;;;+------------~%
                                     %-----------;;;;;;;;;;;%......................-!%.....      ..   ........     ....~....%...........%............~..........%;;;;;;;;;;;;;;;;-------------%
                                    %-----------;;;;;;;;;;;$......................%^^i..........  .   ....o.....   .....%...!^$.........*!..........  ...........$;;;;;;;;;;;;;;;;-------------u
                                  a.----------;;;;;;;;;;;;$;..... ...............$^^ i.....................%...............6^^ a-........*..........  -........**$;;;;;;;;;;;;;;;;;*------------^n
                                 %----------;;;;;;;;;;;;;;$.....z .............+a^^  %.....................$6............-.!^    %.......*$.........  3......^**%;;;;;;;;;;;;;;;;;;;;-----------  %
                                %---------;;;;;;;;;;;;;;;$-..... .............^v^^   *.....................$*;u...........+$      %......**.......... %....-***$;;;;;;;;;;;;;;;;;;;;;;-----------  %
                               8 --------;;;;;;;;;;;;;;;;$.....^ ............+$^^   ..%....................%*^*$.........6%^...-n8%%%-....*$......... 1....^****%;;;;;;;;;;;;;;;;;;;;;;;---------- %%
                              ! -------;;;;;;;;;;;;;;;;;8z.....8 ...........-$$$......;-.*8................***.+*$...........+6%%8-....6..**......... o.......-**$;;;;;;;;;;;;;;;;;;;;;;;--------- %
                             % ------;;;;;;;;;;;;;;;;;;;$...................$818       %....................~*...-*$v...........%     %%..^*a........ o...........%;;;;;;;;;;;;;;;;;;;;;;-------- %1
                            % -----;;;;;;;;;;;;;;;;;;;;;$.....z ...........**^+.        %...................$*......*!$...........-%   %...*$........ %............%;;;;;;;;;;;;;;;;;;;;-------- %!
                            % ------;;;;;;;;;;;;;;;;;;;~%.....% ...........$^^..         %..................-*.......%^^%8...........%6 %..*o........ 6............%z;;;;;;;;;;;;;;;;;;-------- %
                            %  -----;;;;;;;;;;;;;;;;;;;~$.....- ..........n^^...          %..................$*.....%^^    %6...........%6.**u....... -........^*-.$;;;;;;;;;;;;;;;;;--------- %
                            %!  -----;;;;;;;;;;;;;;;;;;;3..... ...........$^^..            %..................%....%^^        %8..........-%*%...... 6...-********$;;;;;;;;;;;;;;;;;--------.-%
                             -%  -----;;;;;;;;;;;;;;;;;;;%...+ ..........*~^^.              %.................o+..%^^            %%..........%...... -***********%u;;;;;;;;;;;;;;;---------^61~
                               %1 -----;;;;;;;;;;;;;;;;;;;%..! ..........n^^..               ~%................%.%^^                 %%......%..... %***********%!;;;;;;;;;;;;;;---------%;;+$
                                 %. ----;;;;;;;;;;;;;;;;;;;%.% ..........$^^                   %................$^^                       %%+3..... .-$n*******%~;;;;;;;;;;;;--------;$;;;*-$
                                  *% -----;;;;;;;;;;;;;;;;;;%% ..........$^^           ;ii-      %..............^z.      %%%%%%%%%%^         8.... %.......1$6$;;;;;;;;---------^$v;;;;;;-$
                                    -% -----;;;;;;;;;;;;;;;;o% ..........$^^       !%%%%%%%%%%     %u.....%!-....8+     888!     8%%%        %....i%***$%!-.+--;~~z%%$8!66!~;;;;;;;;;;;n$
                                       %+.----;;;;;;;;;;;;;;;$  .........%^^     .%%%i     n%%%^     ~%-..n*!.%...$   z886         888v      a...-.zo%-     6u^^^^^*$;;;;;;;;;;;;;;;%$
                                          o8..----;;;;;;;;;;;~  .........a^.    a%%8         ^8%6       z%3     -%%;u 66 .........  688     %... ..-    %^^^^^^^^^$*****%%o%$%$$v
                                           8.;;;~6$6---^;;;;;;$ .........-o     888            88                     ...............668    i.. ;....%1^^^*.^^^^%********$**...%v
                                             $ ;;;;;;;;;;;;;;;~. .........3    *86  ..........                      ...................    %...a^-..v^^^^ ...3-..$*******3***...%
                                               ^6 ;;;;;;;;;;;;;$ .........%     i!..............                    ....................  *-..6^^o..!^^$ ....%6...3******@****...%
                                                  -%~;;;;;;;;;;;$ ........-*    ...;...;^..;......                 .........;...;...;;... %.-8^-^n.-68$^....u.....$***********...^%
                                                    %.&@~;;;;;u%*%.........%   ...;...;;..;+......                 ........;...;+..^;....%.;v.  ^o..6***$...... .%******n*****^...%
                                                  *....@***********%........%  ...;...;..+;.......           .i%$$$%%..........;...;....%.8^    ^...%****%^^....%**************...%*
                                                  .....v*************$.......% ...................  $;;;;;;;;;;;;;;;;6.................;*$.    6$...$******$...%*****&*********...86
                                                 %.....*8*************;.%+....% ..................  6;;;^+++++++++++..3................%-    3**$...%*******$-%***~************-..n!
                                                 ......^**;************...-8%% % ...............    8..+++++++++++++++6.............. %   !;****%...%**********;n**************+..%
                                                 *.....+***@***********....$i      ...........      ;*+++++++++++++++%     ......   .  ^$*******....%*******~u*****************.-%
                                                 %.....+*****6*********....&*%$                           -++++++++-                n%**********-...u*****i********************@
                                                  %....+*******#*******....@****%%^                                             6%  %***********i....o*@*********************@;
                                                   8...-*********#*****....@*********%$%    %                                ~%       $***********%....$*********************##
                                                zo  $..-*************@&....@***********$%     %%;  % %               i%             +%***********....+*******************@*$
                                              i-     -+-**************@....@**********;$               %%%+^^^^^^^^^%%%              %*********3;8....$****************$**%  %%
                                            v^        8@*************1.....@*********3$                 ~+^^^^^^^^^^$**z              %*******$**%.....$**************n***$    !6
                                           %  ....    .!*v***********..... @********$$                  **z**$^^$***~***               %a***@*****+.....8***********$****~-..    %
                                          o ... ...... %**~********&.....  ;@*****i%                    $v***;*i****$n*6                3$*@******$ .....%*********@*****6 ...     %
                                        .. ..      ... $**********3.....  @**&***$                      %8*v*****%***$*3                  &6*******.  ....-$******@******u+  ..     %
                                        a  ........ .. ;****@***#+-^%@@#*****@$3%                    .%**--*$*******v*$$%                   $3********8%%%%$$$***v********%  ...     %
                                       %  ........... %*****@**************%%.  .. o%       8%%~--^o@+--;-***~n*****i*~o*~@**u$$.         %1...$%****************o********61 ...      %
                                       . ........^o$$*******#***********n$  ..  ..     -%%%%~----***&--***;z****u$$6**o***#*****!$z%%%%~    ..    .n$%*********************z%...      ~3
                                      8 ......13688%%%%%%%%%%886666666%%6666666666668%63iiiii8!!!!333%666%8%%%%%%%%%%%%%%%%%%%%!6!!!iii%%iiiiiiiiiiii11ua%%%aaaau$i!!!!!!!!!!$....     %
                                      % ......%                                                                                                                              %v%....   i;
                                      ! ......%                                                                                                                              %$$%8...   !
                                      u .....z%                                                                                                                              %.~....... %
                                      % ...!  %                                                                                                                              %  i...... %
                                      %   %   %                                                                                                                              %    %.... 8
                                      o  !    %                                      a                                                                                       %     %...~
                                       u u    %                                    aaaa                                                                                      %      %..%
                                       %%     %                                   aaaaaaaaaaaaaaaaav                  aaaaaaaaaaaaaaaaaaaaaaaaaa                             %       %.%
                                             3%                                 aaaz          aaaa                                        aaaaaz                             %        %
                                            %-%                               aaaa           aaa                                       aaaaa                                 %u
                                          %o%%%                             aaaaaaaaaaaaaaaaaaaaaaaaaa                              aaaaa                                    %uv
                                         %%-----%                           a                      +aa                           aaaaa-                                      %%%v
                                        z%%--i%--%                            zaavnoooooooooooooooonaa                           -aaa                                      %^---%.
                                       .+%%-----*%                            zaazzzzzzzzzzzzzzzzzzzaa                            aaa                                     ^-----%%+
                                        +%%v-----%                                                 +aa                            aaa                                     %-+---%%+
                                        %%%%----;%                            aaaaaaaaaaaaaaaaaaaaaaaa                            aaa                                    %------%.3
                                 +1..+1   i%------i                                       v         a                             aaa                                     %-----%       3n%
                              i.....+ . *  %%-i18%                           aaz  ^aa    oaaa      ^aaa                           aaa                                    i6-----%      !a.&..o+
                            -...   ... 8.o  %%-~%%                          aaa   -aa      aa        zaaa                         aaa                                     %----%8     %.....@....%
                         1  ..   ..#.. .. .6  %                            aaa    ^aa            aaa   aaa                       -aaa                                      %%%%      %.....  .... ..8
                       %   ..   .. ... .6. .- %                           aaa      aaaaaaaaaaaaaaaa                         .aaaaaaan                                        %      %......  ..6..  .. ^
                     8 ..  .....  z...  ..... %                                                                              aaaaaz                                          %     o ....... .. @ .. ..  6
                   %.........    -  .....i... %                                                                                                                              %    +  ...   ....  a ..... .. .
                 % ..  ...  .... n......      %                                                                                                                              %   -  ... -   ...    .. .... .. 6
               u  ..  .......... .........- ..%                                                                                                                              %  - ......@... ......-..     ..   6
              -  ...   . ..  ...@.. ......v...%                                                                                                                              % ^  ..  ....... .. ...!...    ..    .
            %    .. ......   ...... ..........%                                                                                                                              %.   .    ... ..  .. ...@.........   .8
           ^     ..  ....   ...6...........1..%                                                                                                                              %    .  ..- . ...........i..............z
         %      ...     ...................a..%                                                                                                                              %   .. ...@..............................3
        ..    ....    ........................%                                                                                                                              %.... ....................+............... ~
      % .........   ..........$.............% %888888*v~nnnnnv!6668888888%%%%%%%%%%%%%%%%88%%%%%8%8%%%%%8888888%88888888888888%8%8866666888888888888888888888888888888888un~+%     ...~.................@................%
     8  ......     ......................... .  ..%--+8+-----*****$--*;*%**************$!%z;;;;;@#;;;;@+++;;+++++++;%++.@;;;;;;;;;;;&!$*************;*@@*u******---%-oa-%..  ..    ...@..................$.................
   ^......         ..................... .........-----%-----*****a--***$**************%  .+;@;;;;;;;@++++8;;+++++++*+++ o;;;;;~#;;;;;;;$***********;*u;*;******---~-++-+..  .. ..........................-.................%
  %... ....    ..............i..........  .. 1...%-----%-----******--*;a3************z3  ++++ ++%;;6++++++++#;++++*+++++. o;~;;;;;;;;;;;;@**********~*o;*o******+---%-;--1.       ...u.................................. ....;

*/


#define GKD std::cin.tie(nullptr)->std::ios::sync_with_stdio(false)
#define clr(a, b) memset(a, b, sizeof(a))
#define cpy(a, b) memcpy(a, b, sizeof(a))
//#define LOCAL
//#define PRIME

#include <bits/stdc++.h>

#ifdef LOCAL

#define dbg(x...) do { std::cout << #x << " -> "; err(x); } while (0)

void err() { std::cout << std::endl; }

template<class T, class... Ts>
void err(T arg, Ts &...args) {
    std::cout << arg << ' ';
    err(args...);
}

#else

#define dbg(x...) 114514;

#endif

using namespace std;
using ll = long long;
using ull = unsigned long long;
const int INF = 0x3f3f3f3f;
ll mod = 0;

inline ll qpow(ll _a, ll _n, ll _mod = mod) {
    ll ans = 1;
    while (_n) {
        if (_n & 1)
            ans *= _a;
        _n >>= 1;
        _a *= _a;
        if (_mod > 0) {
            ans %= _mod;
            _a %= _mod;
        }
    }
    return ans;
}

#ifdef PRIME

const int N = 1e7 + 100;
vector<int> minp(N);
vector<int> primes;
bitset<N> st;

void get_primes(int n) {
    for (int i = 2; i <= n; i++) {
        if (!st[i])
            minp[i] = i, primes.emplace_back(i);
        for (int j = 0; primes[j] * i <= n; j++) {
            int t = primes[j] * i;
            st[t] = true;
            minp[t] = primes[j];
            if (i % primes[j] == 0)
                break;
        }
    }
}

#endif
#ifndef __MODINT_HPP
#define __MODINT_HPP

#include <iostream>

#if __cplusplus < 201703L
#define constexpr inline
#endif

template<const int T>
struct ModInt {
    int x;

    constexpr ModInt(long long x = 0) : x(x % T) {}

    constexpr int val() { return x; }

    constexpr ModInt operator+(const ModInt &a) const {
        int x0 = x + a.x;
        return ModInt(x0 < T ? x0 : x0 - T);
    }

    constexpr ModInt operator-(const ModInt &a) const {
        int x0 = x - a.x;
        return ModInt(x0 < 0 ? x0 + T : x0);
    }

    constexpr ModInt operator*(const ModInt &a) const { return ModInt(1LL * x * a.x % T); }

    constexpr ModInt operator=(const ModInt &a) { return x = a.x; }

    constexpr ModInt operator=(long long y) { return x = y % T; }

    constexpr ModInt operator/(const ModInt &a) const { return *this * a.inv(); }

    constexpr bool operator==(const ModInt &a) const { return x == a.x; };

    constexpr bool operator!=(const ModInt &a) const { return x != a.x; };

    constexpr void operator+=(const ModInt &a) {
        x += a.x;
        if (x >= T) x -= T;
    }

    constexpr void operator-=(const ModInt &a) {
        x -= a.x;
        if (x < 0) x += T;
    }

    constexpr void operator*=(const ModInt &a) { x = 1LL * x * a.x % T; }

    constexpr void operator/=(const ModInt &a) { *this = *this / a; }

    constexpr friend ModInt operator+(int y, const ModInt &a) {
        int x0 = y + a.x;
        return ModInt(x0 < T ? x0 : x0 - T);
    }

    constexpr friend ModInt operator-(int y, const ModInt &a) {
        int x0 = y - a.x;
        return ModInt(x0 < 0 ? x0 + T : x0);
    }

    constexpr friend ModInt operator*(int y, const ModInt &a) { return ModInt(1LL * y * a.x % T); }

    constexpr friend ModInt operator/(int y, const ModInt &a) { return ModInt(y) / a; }

    constexpr friend std::ostream &operator<<(std::ostream &os, const ModInt &a) { return os << a.x; }

    constexpr friend std::istream &operator>>(std::istream &is, ModInt &t) { return is >> t.x; }

    constexpr ModInt pow(int n) const {
        ModInt res(1), mul(x);
        while (n) {
            if (n & 1) res *= mul;
            mul *= mul;
            n >>= 1;
        }
        return res;
    }

    constexpr ModInt operator^(int n) const {
        return pow(n);
    }

    constexpr ModInt inv() const {
        int a = x, b = T, u = 1, v = 0;
        while (b) {
            int t = a / b;
            a -= t * b;
            std::swap(a, b);
            u -= t * v;
            std::swap(u, v);
        }
        if (u < 0) u += T;
        return u;
    }

    constexpr ModInt operator~() const {
        return inv();
    }

    constexpr ModInt &operator++() {
        ++x;
        if (x >= T) x -= T;
        return *this;
    }

    constexpr ModInt &operator--() {
        --x;
        if (x < 0) x += T;
        return *this;
    }

    constexpr ModInt operator++(int) {
        ModInt t = *this;
        ++*this;
        return t;
    }

    constexpr ModInt operator--(int) {
        ModInt t = *this;
        --*this;
        return t;
    }
};


using Mint = ModInt<998244353>;

#endif //__MODINT_HPP

inline void init() {
    /*Init Here*/
}

const int MAXN = 300;

vector<vector<vector<Mint>>> f(MAXN, vector(MAXN, vector<Mint>(MAXN)));

vector<vector<vector<Mint>>> g(MAXN, vector(MAXN, vector<Mint>(MAXN)));

vector<vector<vector<Mint>>> h(MAXN, vector(MAXN, vector<Mint>(MAXN)));

vector<vector<vector<Mint>>> w(MAXN, vector(MAXN, vector<Mint>(MAXN)));

void idol_produce(int testCase) {
    /*Code Here*/
    int n;
    cin >> n;
    vector<int> a(n + 1);
    for (int i = 1; i <= n; i++) cin >> a[i];
    for (int i = 1; i <= n; i++) {
        for (int j = 1; j <= n; j++) {
            for (int k = 1; k <= n; k++) {
                if (a[i] == a[j] && a[j] == a[k]) {
                    f[i][j][k] = w[i - 1][j - 1][k - 1] + 1;
                }
                g[i][j][k] = g[i - 1][j][k] + f[i][j][k];
                h[i][j][k] = h[i][j - 1][k] + g[i][j][k];
                w[i][j][k] = w[i][j][k - 1] + h[i][j][k];
            }
        }
    }
    cout << w[n][n][n] << '\n';
}

signed main() {
    GKD;
    init();
    int T = 1;
//    cin >> T;
    for (int i = 1; i <= T; i++) {
        idol_produce(i);
    }
    return 0;
}
